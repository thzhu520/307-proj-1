<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Existing Issues</title>
    <link rel="stylesheet" href="existing-issues.css">
    <link href="https://fonts.googleapis.com/css2?family=Playpen+Sans&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>

<body>
    <div class="background-stars">
        <!-- Stars originating from the left -->
        <span class="star small left">‚Äß‚ÇäÀö</span>
        <span class="star medium left">ìè≤</span>
        <span class="star large left">‚ãÖ‚ô°</span>
       

        <!-- Stars originating from the right -->
        <span class="star small right">‚Äß‚ÇäÀö</span>
        <span class="star medium right">ìè≤</span>
        <span class="star large right">‚ãÖ‚ô°</span>

    </div>

    <!-- Navbar -->
    <header class="navbar ">
        <div class="navbar-logo">
            <a href="../index.html">
                <img src="icon.png" alt="SLOutions Logo">
            </a>
        </div>
        <nav class="navbar-links">
            <a href="about.html">About Us</a>
            <a href="existing-issues.html">Existing Issues</a>
            <a href="submit-report.html">Submit a Report</a>
            <a href="faq.html">FAQ</a>
        </nav>
        <div class="static-bar">
            <a href="../anon/issue_main.html">
                <img src="staticbar.png" alt="Home Icon" class="static-bar-icon">
            </a>
        </div>
    </header>
    <!-- Content Wrapper -->
    <main>
        <div class="content-wrapper">
            <!-- Header -->
            <div class="issues-header">
                Existing Issues
            </div>
            <!-- Description Box -->
            <div class="description-box">
                <p>Check the status of your issue using your incident report ID number here.</p>

                <!-- Form Section -->
                <div class="form-container">
                    <input id="report-number" type="text" placeholder="Incident Report Number">
                    <button onclick="checkStatus()">Submit</button>
                </div>

                <!-- Icon Section -->
                <div class="icon-container">
                    <div class="icon-item" id="reporting">
                        <span class="icon">üì©</span>
                        <p>Reporting</p>
                    </div>
                    <div class="icon-item" id="checking">
                        <div class="icon">‚è≥</div>
                        <p>Checking</p>
                    </div>
                    <div class="icon-item" id="resolving">
                        <span class="icon">üéâ</span>
                        <p>Resolved</p>
                    </div>
                </div>

                <!-- Status Description -->
                <div id="status-description" class="status-description"></div>
            </div>
            <!-- Sand Pour Effect -->
            <div class="sand-pour-container" id="sand-pour-container">
                <div class="sand-line sand-line1"></div>
                <div class="sand-line sand-line2"></div>
                <div class="sand-line sand-line3"></div>
                <div class="sand-line sand-line4"></div>
                <div class="sand-line sand-line5"></div>
            </div>

            <!-- Call-to-Action -->
            <div class="cta">
                <a href="submit-report.html" class="cta-button">‚û§ Submit a New Report</a>
            </div>            
        </div>
    </main>

    <!-- JavaScript for Status Logic -->
    <script>
        function checkStatus() {
    const reportNumber = document.getElementById('report-number').value;

    // Reset all icons to inactive state (grey color)
    const icons = document.querySelectorAll('.icon');
    icons.forEach(icon => {
        icon.classList.remove('active');
        icon.style.filter = 'grayscale(100%)'; // Make inactive icons grey
    });

    // Reset description box
    const descriptionBox = document.getElementById('status-description');
    descriptionBox.innerHTML = "";

    // Reset sand animation visibility
    const sandContainer = document.getElementById('sand-pour-container');
    sandContainer.style.display = 'none';

    // Trigger animations based on report number
    if (reportNumber === "123") {
        const reportingIcon = document.getElementById('reporting').querySelector('.icon');
        reportingIcon.classList.add('active');
        reportingIcon.style.filter = 'grayscale(0%)'; // Make active icon colored
        descriptionBox.innerHTML = "<p>Your report has been received and is awaiting further action.</p>";
    } else if (reportNumber === "456") {
        const checkingIcon = document.getElementById('checking').querySelector('.icon');
        checkingIcon.classList.add('active');
        checkingIcon.style.filter = 'grayscale(0%)'; // Make active icon colored
        descriptionBox.innerHTML = "<p>We are currently verifying your report. Please check back later.</p>";
    } else if (reportNumber === "789") {
        const resolvingIcon = document.getElementById('resolving').querySelector('.icon');
        resolvingIcon.classList.add('active');
        resolvingIcon.style.filter = 'grayscale(0%)'; // Make active icon colored
        descriptionBox.innerHTML = `
            <p><strong>Location:</strong> Building A, Floor 2, Room 210</p>
            <p><strong>Issue:</strong> Broken light fixture</p>
        `;
        launchConfettiInContainer(); // Use confetti effect for "Resolving"
    } else {
        alert("Invalid Report Number");
    }
}

        function launchConfettiInContainer() {
    const descriptionBox = document.querySelector(".description-box");
    
    // Create a canvas for confetti
    const canvas = document.createElement("canvas");
    canvas.style.position = "absolute";
    canvas.style.top = 0;
    canvas.style.left = 0;
    canvas.style.width = "100%";
    canvas.style.height = "100%";
    canvas.style.pointerEvents = "none";
    descriptionBox.style.position = "relative"; // Ensure description-box is positioned relative
    descriptionBox.appendChild(canvas);

    const confetti = window.confetti.create(canvas, {
        resize: true,
        useWorker: true,
    });

    // Launch confetti
    confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.5 }, // Centered vertically in the container
    });

    // Remove canvas after the animation
    setTimeout(() => {
        descriptionBox.removeChild(canvas);
    }, 3000); // Adjust duration as needed
}

    </script>
</body>

</html>
